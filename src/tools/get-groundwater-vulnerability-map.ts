import { sguClient } from '@/clients/sgu-client';
import { withErrorHandling } from '@/lib/response';
import { createMapToolHandler } from '@/lib/map-tool-handler';
import { mapToolInputSchema } from '@/types/common-schemas';

export const getGroundwaterVulnerabilityMapInputSchema = mapToolInputSchema;

export const getGroundwaterVulnerabilityMapTool = {
  name: 'sgu_get_groundwater_vulnerability_map',
  description:
    'Get a rendered map image URL showing groundwater vulnerability classification for an area in Sweden. ' +
    'Returns URLs for both the map image and a legend. ' +
    'Shows 3-class vulnerability assessment indicating how susceptible groundwater is to contamination from surface activities. ' +
    'You must provide either a bounding box (bbox) or a corridor (line with buffer). ' +
    'All coordinates must be in SWEREF99TM (EPSG:3006). ' +
    'Essential for environmental impact assessment, construction planning near water sources, and contamination risk evaluation.',
  inputSchema: getGroundwaterVulnerabilityMapInputSchema,
};

export const getGroundwaterVulnerabilityMapHandler = withErrorHandling(
  createMapToolHandler(sguClient.getGroundwaterVulnerabilityMapUrl),
);
